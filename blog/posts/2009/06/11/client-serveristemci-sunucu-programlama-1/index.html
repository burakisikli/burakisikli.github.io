<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">

  <title>Client-Server(İstemci-Sunucu)&nbsp;Programlama-1</title>

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">



<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="/theme/js/html5shiv.min.js"></script>
  <script src="/theme/js/respond.min.js"></script>
<![endif]-->

<script src="/theme/js/modernizr-2.7.1.custom.min.js"></script>

<link rel="stylesheet" href="/theme/css/academicons.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic">

  <link rel="stylesheet" href="/theme/css/main.min.css?3cda5378">
</head>

<body class="post-index">

<div itemscope itemtype="http://schema.org/Person" class="navigation-wrapper">
  <!--<div class="site-name">
    <a href="/"><span itemprop="name">Burak ISIKLI</span></a>
  </div>-->
  <div class="top-navigation" align="right">
    <nav role="navigation" id="site-nav" class="nav">
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/research/">Research</a></li>
      </ul>
    </nav>
  </div>
</div>
<div id="main" role="main">
  <div class="article-author-side">
<div>
  <img src="/theme/images/profile.jpg" alt="Burak IŞIKLI" class="bio-photo">
  <p>Computer scientist living in Istanbul, Turkey. Data scientist at Turkcell, Traveller, Rower, Sailor</p>
  
            <a href="https://twitter.com/burakisikli" class="author-social" target="_blank">
                    <i class="fa fa-fw fa-twitter-square"></i> Twitter
            </a>
            <a href="https://github.com/burakisikli" class="author-social" target="_blank">
                    <i class="fa fa-fw fa-github-square"></i> Github
            </a>
            <a href="https://github.com/burakisikli" class="author-social" target="_blank">
                    <i class="fa fa-fw fa-linkedin-square"></i> Linkedin
            </a>
    <a href=mailto:&#98;&#117;&#114;&#97;&#107;&#46;&#105;&#115;&#105;&#107;&#108;&#105;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109; class="author-social" target="_blank">
    	<i class="fa fa-fw fa-envelope-square"></i> Mail 
    </a>
</div>  </div>
  <article class="post">
    <div class="headline-wrap">
      <h1>Client-Server(İstemci-Sunucu)&nbsp;Programlama-1</h1>
    </div>
    <div role="contentinfo">
      <p class="byline"><strong>
        <time datetime="2009-06-11">11.06.2009</time></ br></strong></p>
    </div>
    <div class="article-wrap">
      <p>Client-Server(Sunucu-İstemci) programlama yaparken bilmemiz gereken bazı
kavramlar var. Programlama yaparken network(ağ) altyapısını iyi bilmemiz
gerekiyor. Ağ&#8217;da her katmanın özelliğini anlamamız gerekiyor. Eğer
bilmiyorsanız <span class="caps">OSI</span> katmanlarını öğrenmenizi tavsiye ederim. Biz
kullanacağımız katman orta katmandır. Haberleşme türü olarak Socket
Communication(Soket İletişimi)&#8217;i kullanacağız. Soket iletişimi  <span class="caps">TCP</span> ve
<span class="caps">UDP</span> iletişimi olmak üzere iki farklı protokölle sağlanır.   <span class="caps">TCP</span> ile <span class="caps">UDP</span>
protokolünün farkı; <span class="caps">UDP</span> protokolünü güvenlik olmaksızın iletişim
sağlanacağında örneğin online radyo(streaming) gibi, <span class="caps">TCP</span> protokolünü ise
güvenliğin ön planda olduğu iletişimde kullanıyoruz. Öncelikle <span class="caps">TCP</span>
protokolünü kullanarak programımızı&nbsp;yapacağız.</p>
<p><span class="caps">TCP</span></p>
<p>Bir istemci bir de sunucumuz olacaktır. Sunucumuz istemcilere yayın
yaparak gönderilmesi gereken bilgileri gönderecektir. Ancak bunu güvenli
bir iletişim yoluyla&nbsp;yapacaktır.</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">edu.burakkk.cliser.tcp</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * </span>
<span class="cm"> * A Simple Client-Server </span>
<span class="cm"> * Server</span>
<span class="cm"> *  </span>
<span class="cm"> *@version 1.0</span>
<span class="cm"> *@author Burak ISIKLI</span>
<span class="cm"> *@date July 09, 2009</span>
<span class="cm"> *</span>
<span class="cm"> **/</span>

<span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Server</span> <span class="o">{</span>
 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span> <span class="n">args</span><span class="o">[])</span> <span class="o">{</span>
 <span class="k">try</span> <span class="o">{</span>
 <span class="n">ServerSocket</span> <span class="n">sock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ServerSocket</span><span class="o">(</span><span class="mi">5000</span><span class="o">);</span>
 <span class="c1">// Listen for connections</span>
 <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Waiting for client&quot;</span><span class="o">);</span>
 <span class="n">Socket</span> <span class="n">client</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>

 <span class="c1">// We have a connection</span>
 <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Connected with client&quot;</span><span class="o">);</span>
 <span class="n">PrintWriter</span> <span class="n">pout</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PrintWriter</span><span class="o">(</span><span class="n">client</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">(),</span>
 <span class="kc">true</span><span class="o">);</span>

 <span class="c1">// Write the Date to the socket</span>
 <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Sent data to client&quot;</span><span class="o">);</span>
 <span class="n">pout</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>

 <span class="c1">// Close the socket</span>
 <span class="c1">// and resume listening for more connections</span>

 <span class="n">client</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
 <span class="n">pout</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
 <span class="o">}</span>
 <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
 <span class="o">}</span>
 <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Sunucunun yayın yapacağı portun seçimi bu konuda en önemli konudur.
0-1023 arasındaki portlar başka uygulamalarda kullanıldığı için bu
portlar dışında bir portu seçerseniz bir sorun çıkacağını sanmıyorum.
Ben örneğimde 5000 portunu seçtim. ServerSocket objesini yaratılırken
bunu yaptığımı görebilirsiniz. PrintWriter objesiyle istemciye
gönderilecek ögeler yazılacaktır(pipeline edilecek) Yani istemci her
istekte bulunduğunda sunucu kendi tarihini karşı tarafa&nbsp;gönderecektir.</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">edu.burakkk.cliser.tcp</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * </span>
<span class="cm"> * A Simple Client-Server </span>
<span class="cm"> * Dummy Client</span>
<span class="cm"> *  </span>
<span class="cm"> *@version 1.0</span>
<span class="cm"> *@author Burak ISIKLI</span>
<span class="cm"> *@date July 09, 2009</span>
<span class="cm"> *</span>
<span class="cm"> **/</span>

<span class="kn">import</span> <span class="nn">java.net.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>
 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">connect</span><span class="o">()</span> <span class="o">{</span>
 <span class="k">try</span> <span class="o">{</span>
 <span class="n">Socket</span> <span class="n">sock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Socket</span><span class="o">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="o">,</span> <span class="mi">5000</span><span class="o">);</span>
 <span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">();</span>
 <span class="n">BufferedReader</span> <span class="n">bin</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">in</span><span class="o">));</span>
 <span class="n">String</span> <span class="n">line</span><span class="o">;</span>
 <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">bin</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
 <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
 <span class="n">sock</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
 <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">ioe</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ioe</span><span class="o">);</span>
 <span class="o">}</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
 <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
 <span class="k">try</span> <span class="o">{</span>
 <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
 <span class="n">connect</span><span class="o">();</span>
 <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Error : &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">);</span>
 <span class="o">}</span>
 <span class="o">}</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
 <span class="n">Thread</span> <span class="n">Debugger</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Client</span><span class="o">());</span>
 <span class="n">Debugger</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
 <span class="n">Debugger</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
 <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>İstemciyi yaparken thread mantığıyla yaptığımız dikkatinizi çekmiştir.
Bunun nedeni eğer thread mantığıyla yapmazsak istemci bir sefer istekte
bulunacak ve program sonlandırılacaktır. Bu nedenle sürekli hale
getirerek 1 saniye arayla istekte bulunacaktır. Socket objesine
yaratırken ip adresini ve portunu yazmamız gerekiyor. Biz kendi kendine
sanal bağlantı yapılacağı için(dummy client) 127.0.0.1 adresine verdik
ancak buraya gerçek ip adresini yazmanız gerekecektir. Port ise sunucuya
verdiğimiz port ile aynı olmak zorundadır. Biz 5000 &#8216;ni vermiştik.
Inputstream ve bufferedreader ise gönderilen cevapları okumak için&nbsp;yaratıyoruz.</p>
      <hr />
    </div>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
        var disqus_config = function () {
        this.page.url = '/blog/posts/2009/06/11/client-serveristemci-sunucu-programlama-1/';
        this.page.identifier = 'blog/posts/2009/06/11/client-serveristemci-sunucu-programlama-1/'; 
        };
        */
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//burakisikli-com.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
  </article>
</div>

<div class="footer-wrap">
  <div class="related-articles">
  <h4>Related posts <small class="pull-right">(<a href="/blog/">View all posts</a>)</small></h4>
    <ul>
      <li><a href="/blog/posts/2009/06/11/client-serveristemci-sunucu-programlama-2/" title="Client-Server(İstemci-Sunucu)&nbsp;Programlama-2">Client-Server(İstemci-Sunucu)&nbsp;Programlama-2</a></li>
    </ul>
  </div>
  <footer>
<p>
  &copy; 2009-2017 Burak ISIKLI
</p>  </footer>
</div>

<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="/theme/js/jquery.fitvids.js"></script>

    <script src="/theme/webassets-external/23e78ea5fc089298362d660f35789edb_main.js"></script>


<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-55064690-2', 'auto');
  ga('send', 'pageview');

</script>

</body>
</html>